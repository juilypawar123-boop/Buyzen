<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Buyzen.Pages.ShoppingCartPage"
             Title="Shopping Cart"
             BackgroundColor="#1C1C1C"
             Padding="10">

    <ScrollView>
        <VerticalStackLayout Spacing="20">

            <Label Text="My Shopping Cart"
                   FontSize="28"
                   FontAttributes="Bold"
                   TextColor="#FFD700"
                   HorizontalOptions="Center"/>

            <!-- Cart Items -->
            <CollectionView x:Name="CartItemsView"
                            SelectionMode="None"
                            ItemsLayout="VerticalList">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BackgroundColor="#2C3E50"
                               CornerRadius="16"
                               Padding="10"
                               Margin="5"
                               HasShadow="True">
                            <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                                <Image Source="{Binding ImageUrl}"
                                       HeightRequest="80"
                                       WidthRequest="80"
                                       Aspect="AspectFill"/>
                                <VerticalStackLayout Spacing="5" HorizontalOptions="FillAndExpand">
                                    <Label Text="{Binding Name}"
                                           FontAttributes="Bold"
                                           TextColor="White"
                                           FontSize="16"/>
                                    <Label Text="{Binding ShortDescription}"
                                           FontSize="12"
                                           TextColor="#B0B0B0"/>
                                    <Label Text="{Binding Price, StringFormat='Price: ${0:F2}'}"
                                           FontAttributes="Bold"
                                           TextColor="#00FF00"/>

                                    <!-- Quantity and Actions -->
                                    <HorizontalStackLayout Spacing="10">
                                        <Stepper Minimum="1" Maximum="100" Value="{Binding Quantity}" ValueChanged="OnQuantityChanged"/>
                                        <Label Text="{Binding Quantity}" TextColor="White" VerticalOptions="Center"/>
                                        <Button Text="Remove" BackgroundColor="#DC3545" TextColor="White" Clicked="OnRemoveItemClicked" CommandParameter="{Binding}"/>
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Discount Code -->
            <Frame BackgroundColor="#2C3E50" CornerRadius="16" Padding="10">
                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Entry x:Name="CouponEntry" Placeholder="Enter discount code" TextColor="White" BackgroundColor="#1E1E1E"/>
                    <Button Text="Apply Coupon" BackgroundColor="#28A745" TextColor="White" Clicked="OnApplyCouponClicked"/>
                </HorizontalStackLayout>
            </Frame>

            <!-- Price Summary -->
            <Frame BackgroundColor="#2C3E50" CornerRadius="16" Padding="15">
                <VerticalStackLayout Spacing="5">
                    <Label x:Name="SubtotalLabel" TextColor="White" FontAttributes="Bold" FontSize="16"/>
                    <Label x:Name="ShippingLabel" TextColor="White" FontAttributes="Bold" FontSize="16"/>
                    <Label x:Name="TotalLabel" TextColor="White" FontAttributes="Bold" FontSize="18"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Checkout Button -->
            <Button Text="Proceed to Checkout" BackgroundColor="#FFD700" TextColor="Black" CornerRadius="16" Clicked="OnProceedToCheckoutClicked"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
