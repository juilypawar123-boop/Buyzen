<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Buyzen.Pages.ProductDiscoveryPage"
             Title="Discover Products"
             BackgroundColor="#071227">

    <Grid RowDefinitions="Auto,*"
          Padding="12">

        <!-- Category Selector -->
        <ScrollView Orientation="Horizontal" Grid.Row="0" Margin="20,20,0,20" >
            <HorizontalStackLayout Spacing="10">
                <Button Text="Electronics"
                        Clicked="OnCategorySelected"/>
                <Button Text="Fashion"
                        Clicked="OnCategorySelected"/>
                <Button Text="Home"
                        Clicked="OnCategorySelected"/>
                <Button Text="Sports"
                        Clicked="OnCategorySelected"/>
                <Button Text="LogIn"
                        Clicked="OnLoginSelected"
                        Margin="0,20,40,0"/>
                
            </HorizontalStackLayout>
        </ScrollView>

        <!-- Products Grid -->
        <CollectionView Grid.Row="1" Margin="20,20,40,0" ItemsSource="{Binding Products}" ItemsLayout="VerticalGrid,2">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame CornerRadius="12" Padding="20" Margin="15" HasShadow="True">

                        <VerticalStackLayout Spacing="20">

                            <Image Source="{Binding ImageUrl}"
                                   HeightRequest="400"
                                   Aspect="AspectFill"/>

                            <Label Text="{Binding Name}"
                                   FontAttributes="Bold"
                                   LineBreakMode="TailTruncation"/>

                            <Label Text="{Binding ShortDescription}"
                                   FontSize="12"
                                   TextColor="Gray"
                                   LineBreakMode="TailTruncation"/>

                            <Label Text="{Binding Price, StringFormat='${0:F2}'}"
                                   FontAttributes="Bold"/>

                            <HorizontalStackLayout Spacing="10">
                                <Button Text="View"
                                        CommandParameter="{Binding}"
                                        Clicked="OnViewProduct"/>

                                <Button Text="â™¡"
                                        CommandParameter="{Binding}"
                                        Clicked="OnWishlist"/>

                                <Button Text="ðŸ›’" 
                                        FontSize="22" 
                                        CommandParameter="{Binding}" 
                                        Clicked="OnAddToCartClicked" />
                            </HorizontalStackLayout>

                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>
</ContentPage>
