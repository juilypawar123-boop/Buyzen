<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Buyzen.Pages.OrderManagementPage"
             Title="Order Management"
             BackgroundColor="#0B2B26"
             Padding="0">

    <Grid RowDefinitions="Auto,*">

        <!-- Header -->
        <Grid BackgroundColor="#124D3C" Padding="20">
            <VerticalStackLayout>
                <Label Text="Order Management"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="White"/>

                <Label Text="Monitor, update, and fulfill customer orders"
                       FontSize="14"
                       TextColor="#C8F2E7"/>
            </VerticalStackLayout>
        </Grid>

        <!-- Main Content -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="25" Padding="15">

                <!-- Status Filter Chips -->
                <Frame BackgroundColor="#0F3D34" CornerRadius="20" Padding="15">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Quick Filters"
                               FontAttributes="Bold"
                               TextColor="#9AF5C4"/>

                        <Picker x:Name="StatusFilterPicker"
                                Title="Filter by Status"
                                BackgroundColor="#164F42"
                                TextColor="White"
                                TitleColor="White"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Orders Grid -->
                <CollectionView x:Name="OrdersView"
                                ItemsLayout="VerticalGrid,2"
                                SelectionMode="Single">

                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame CornerRadius="18"
                                   Padding="15"
                                   Margin="5"
                                   BackgroundColor="#0F3D34">

                                <VerticalStackLayout Spacing="6">
                                    <Label Text="{Binding OrderId}"
                                           FontAttributes="Bold"
                                           FontSize="14"
                                           TextColor="#B9FFE4"/>

                                    <Label Text="{Binding CustomerName}"
                                           FontSize="13"
                                           TextColor="White"/>

                                    <Label Text="{Binding Status}"
                                           FontSize="12"
                                           TextColor="#FFD166"/>

                                    <Label Text="{Binding TotalAmount, StringFormat='${0:F2}'}"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#6BFFB8"/>
                                </VerticalStackLayout>

                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <!-- Action Panel -->
                <Frame BackgroundColor="#102F2A" CornerRadius="22" Padding="20">
                    <VerticalStackLayout Spacing="15">

                        <Label Text="Order Actions"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#9AF5C4"/>

                        <Picker x:Name="OrderStatusPicker"
                                Title="Update Status"
                                BackgroundColor="#164F42"
                                TextColor="White"
                                TitleColor="White"/>

                        <Entry x:Name="CourierEntry"
                               Placeholder="Courier Name"
                               BackgroundColor="#164F42"
                               TextColor="White"/>

                        <Editor x:Name="FulfillmentNotesEditor"
                                Placeholder="Fulfillment Notes"
                                BackgroundColor="#164F42"
                                TextColor="White"
                                AutoSize="TextChanges"/>

                        <Grid ColumnDefinitions="*,*"
                              RowDefinitions="Auto,Auto"
                              ColumnSpacing="10"
                              RowSpacing="10">

                            <Button Grid.ColumnSpan="2"
                                    Text="Update Order Status"
                                    BackgroundColor="Green"
                                    TextColor="Black"
                                    FontAttributes="Bold"
                                    Clicked="OnChangeStatusClicked"
                                    HorizontalOptions="Center"/>

                            <Button Grid.Row="1"
                                    Text="Issue Refund"
                                    BackgroundColor="DarkRed"
                                    TextColor="White"
                                    Clicked="OnRefundClicked"/>

                            <Button Grid.Row="1"
                                    Grid.Column="1"
                                    Text="Flag Order"
                                    BackgroundColor="Yellow"
                                    TextColor="Black"
                                    Clicked="OnFlagOrderClicked"/>
                        </Grid>

                    </VerticalStackLayout>
                </Frame>

            </VerticalStackLayout>
        </ScrollView>

    </Grid>
</ContentPage>
